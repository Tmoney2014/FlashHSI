<UserControl x:Class="FlashHSI.UI.Views.Pages.LiveView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:viewModels="clr-namespace:FlashHSI.UI.ViewModels"
             d:DataContext="{d:DesignInstance viewModels:LiveViewModel}"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1000">
    
    <!-- AIê°€ ìž‘ì„±í•¨: ì¹´ë©”ë¼ ì œì–´ UI ë° ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¼ í‘œì‹œ -->
    <Grid Background="#1a1a2e">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- ìƒë‹¨: ì¹´ë©”ë¼ ì •ë³´ ë° ì œì–´ ë²„íŠ¼ -->
        <Border Grid.Row="0" Background="#16213e" Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- ì¹´ë©”ë¼ ìƒíƒœ í‘œì‹œ -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <!-- ì—°ê²° ìƒíƒœ ë„íŠ¸ -->
                    <Ellipse Width="12" Height="12" Margin="0,0,10,0">
                        <Ellipse.Style>
                            <Style TargetType="Ellipse">
                                <Setter Property="Fill" Value="#ff4757"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsCameraConnected}" Value="True">
                                        <Setter Property="Fill" Value="#2ed573"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Ellipse.Style>
                    </Ellipse>
                    
                    <!-- ì¹´ë©”ë¼ ì•„ì´ì½˜ -->
                    <Border Width="40" Height="40" Background="#0f3460" CornerRadius="8" Margin="0,0,12,0">
                        <TextBlock Text="ðŸ“·" FontSize="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    
                    <!-- ì¹´ë©”ë¼ ì´ë¦„ -->
                    <StackPanel VerticalAlignment="Center">
                        <TextBlock Text="ì¹´ë©”ë¼" Foreground="#a0a0a0" FontSize="11"/>
                        <TextBlock Text="{Binding CameraName}" Foreground="White" FontSize="16" FontWeight="SemiBold"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- ìƒíƒœ ë©”ì‹œì§€ -->
                <TextBlock Grid.Column="1" Text="{Binding StatusMessage}" 
                           Foreground="#7f8fa6" FontSize="14"
                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                
                <!-- ì œì–´ ë²„íŠ¼ -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <!-- ë¼ì´ë¸Œ ì‹œìž‘/ì¤‘ì§€ ë²„íŠ¼ -->
                    <Button Command="{Binding ToggleLiveCommand}"
                            Width="120" Height="40" Margin="0,0,10,0"
                            BorderThickness="0" Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Content" Value="â–¶ ë¼ì´ë¸Œ"/>
                                <Setter Property="Background" Value="#2ed573"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsLive}" Value="True">
                                        <Setter Property="Content" Value="â¹ ì¤‘ì§€"/>
                                        <Setter Property="Background" Value="#ff4757"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    
                    <!-- AIê°€ ì¶”ê°€í•¨: ë¶„ë¥˜ ì‹œìž‘/ì •ì§€ ë²„íŠ¼ -->
                    <Button Command="{Binding TogglePredictionCommand}"
                            Width="120" Height="40" Margin="0,0,10,0"
                            BorderThickness="0" Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Content" Value="ðŸ”® ë¶„ë¥˜ ì‹œìž‘"/>
                                <Setter Property="Background" Value="#8e44ad"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsPredicting}" Value="True">
                                        <Setter Property="Content" Value="â¸ ë¶„ë¥˜ ì¤‘ì§€"/>
                                        <Setter Property="Background" Value="#e74c3c"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    
                    <!-- AIê°€ ì¶”ê°€í•¨: ìº¡ì²˜(í”„ë ˆìž„ ì €ìž¥) ì‹œìž‘/ì¤‘ì§€ ë²„íŠ¼ -->
                    <Button Command="{Binding ToggleCaptureCommand}"
                            Width="140" Height="40"
                            BorderThickness="0" Cursor="Hand">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Content" Value="ðŸ“¹ ìº¡ì²˜ ì‹œìž‘"/>
                                <Setter Property="Background" Value="#0984e3"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsCapturing}" Value="True">
                                        <Setter Property="Content" Value="â¹ ìº¡ì²˜ ì¤‘ì§€ (ì €ìž¥)"/>
                                        <Setter Property="Background" Value="#d63031"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        
        <!-- ì¤‘ì•™: Waterfall ì´ë¯¸ì§€ -->
        <Border Grid.Row="1" Background="Black" Margin="16">
            <Grid>
                <Image Source="{Binding WaterfallImage}" 
                       Stretch="Fill" 
                       RenderOptions.BitmapScalingMode="NearestNeighbor"/>
                
                <!-- ë¼ì´ë¸Œ ì¤‘ í‘œì‹œ -->
                <Border HorizontalAlignment="Left" VerticalAlignment="Top" 
                        Background="#ff4757" CornerRadius="4" Padding="8,4" Margin="10"
                        Visibility="{Binding IsLive, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <StackPanel Orientation="Horizontal">
                        <Ellipse Width="8" Height="8" Fill="White" Margin="0,0,6,0"/>
                        <TextBlock Text="LIVE" Foreground="White" FontWeight="Bold" FontSize="12"/>
                    </StackPanel>
                </Border>
                
                <!-- ë°ì´í„° ì—†ìŒ í‘œì‹œ - AIê°€ ìˆ˜ì •í•¨: ì»¨ë²„í„° ëŒ€ì‹  ê¸°ë³¸ Visible -->
                <TextBlock Text="ì¹´ë©”ë¼ ë°ì´í„° ëŒ€ê¸° ì¤‘..." 
                           Foreground="#7f8fa6" FontSize="18"
                           HorizontalAlignment="Center" VerticalAlignment="Center"
                           x:Name="WaitingText">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding WaterfallImage}" Value="{x:Null}">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </Grid>
        </Border>
        
        <!-- í•˜ë‹¨: ì •ë³´ ë°” -->
        <Border Grid.Row="2" Background="#16213e" Padding="16,8">
            <DockPanel>
                <TextBlock Text="ðŸ’¡ ì¹´ë©”ë¼ë¥¼ ì—°ê²°í•œ í›„ 'ë¼ì´ë¸Œ' ë²„íŠ¼ì„ ëˆŒëŸ¬ ìŠ¤íŠ¸ë¦¬ë°ì„ ì‹œìž‘í•˜ì„¸ìš”." 
                           Foreground="#7f8fa6" FontSize="12"
                           HorizontalAlignment="Center" VerticalAlignment="Center"/>
                
                <!-- AIê°€ ì¶”ê°€í•¨: ìº¡ì²˜ ì¤‘ í”„ë ˆìž„ ì¹´ìš´í„° -->
                <TextBlock DockPanel.Dock="Right" FontSize="12" Margin="16,0,0,0"
                           Foreground="#74b9ff" VerticalAlignment="Center"
                           Visibility="{Binding IsCapturing, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <Run Text="ðŸ“¹ ìº¡ì²˜ í”„ë ˆìž„: "/><Run Text="{Binding CapturedFrameCount, Mode=OneWay}"/>
                </TextBlock>
            </DockPanel>
        </Border>
    </Grid>
</UserControl>
